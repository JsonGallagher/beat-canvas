@import "tailwindcss";

@layer base {
  :root {
    /* ── shadcn/ui semantic tokens ─────────────────────────────────────── */
    --background: 0 0% 0%;
    --foreground: 0 0% 92%;           /* #EBEBEB — IBM monochrome off-white */
    --card: 0 0% 4%;
    --card-foreground: 0 0% 92%;
    --popover: 0 0% 4%;
    --popover-foreground: 0 0% 92%;
    --primary: 133 100% 50%;          /* phosphor green */
    --primary-foreground: 0 0% 0%;
    --secondary: 0 0% 10%;
    --secondary-foreground: 0 0% 92%;
    --muted: 0 0% 10%;
    --muted-foreground: 0 0% 55%;
    --accent: 133 100% 50%;           /* phosphor green — true accent */
    --accent-foreground: 0 0% 0%;     /* black on green */
    --destructive: 0 100% 67%;        /* #FF5555 — CGA bright red */
    --destructive-foreground: 0 0% 0%;
    --border: 0 0% 14%;
    --input: 0 0% 14%;
    --ring: 133 100% 50%;             /* phosphor green ring */
    --radius: 0.125rem;               /* 2px — near-square, pixel-precise */

    /* ── CGA 4-bit source palette — exact 1980s values ────────────────── */
    --cga-black:    #000000;
    --cga-white:    #FFFFFF;
    --cga-green:    #00AA00;          /* standard CGA green (darker) */
    --cga-lime:     #55FF55;          /* bright CGA light green */
    --cga-red:      #FF5555;          /* bright CGA red */
    --cga-red-dark: #AA0000;          /* standard CGA red */
    --cga-yellow:   #FFFF55;          /* bright CGA yellow */
    --cga-cyan:     #55FFFF;          /* bright CGA light cyan */
    --cga-magenta:  #FF55FF;          /* bright CGA light magenta */
    --cga-blue:     #5555FF;          /* bright CGA blue */

    /* ── Phosphor terminal colors ──────────────────────────────────────── */
    --phosphor:     #00FF41;          /* IBM 5151 green phosphor */
    --phosphor-dim: #00662A;          /* phosphor at ~40% — secondary states */
    --amber-p7:     #FFB000;          /* P7 amber phosphor (alt terminal) */

    /* ── Legacy named tokens (kept for existing component compatibility) ─ */
    --magenta: #FF55FF;               /* updated to true CGA magenta */
    --amber:   #FFB000;               /* updated to P7 amber phosphor */
    --cyan:    #55FFFF;               /* updated to true CGA cyan */

    /* ── 1980s hardware palette — warm neutrals ────────────────────────── */
    --hw-beige:  #C8BCA8;             /* IBM PC beige — Pantone-like warm gray */
    --hw-putty:  #A89E8C;             /* darker IBM housing tone */
    --hw-cream:  #F0EAD6;             /* keyboard legend color */

    /* ── Semantic alert alias ──────────────────────────────────────────── */
    --cga-alert: #FF5555;             /* CGA red for alerts */
    --pixel-border: #242424;          /* 1px pixel-sharp borders */

    /* ── Surface hierarchy (darkness levels) ──────────────────────────── */
    --surface-0: #000000;             /* base — page background */
    --surface-1: #0A0A0A;             /* cards, panels */
    --surface-2: #111111;             /* inputs, nested panels */
    --surface-3: #1A1A1A;             /* hover states */
    --surface-4: #242424;             /* active/selected states */

    /* ── Border hierarchy ──────────────────────────────────────────────── */
    --border-dim:    #1A1A1A;         /* subtle dividers */
    --border-base:   #242424;         /* standard borders */
    --border-bright: #3A3A3A;         /* emphasized borders */
    --border-active: var(--phosphor); /* focused/selected elements */
  }
}

@theme inline {
  /* ── shadcn/ui color mappings ──────────────────────────────────────── */
  --color-background:          hsl(var(--background));
  --color-foreground:          hsl(var(--foreground));
  --color-card:                hsl(var(--card));
  --color-card-foreground:     hsl(var(--card-foreground));
  --color-popover:             hsl(var(--popover));
  --color-popover-foreground:  hsl(var(--popover-foreground));
  --color-primary:             hsl(var(--primary));
  --color-primary-foreground:  hsl(var(--primary-foreground));
  --color-secondary:           hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted:               hsl(var(--muted));
  --color-muted-foreground:    hsl(var(--muted-foreground));
  --color-accent:              hsl(var(--accent));
  --color-accent-foreground:   hsl(var(--accent-foreground));
  --color-destructive:         hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border:              hsl(var(--border));
  --color-input:               hsl(var(--input));
  --color-ring:                hsl(var(--ring));

  /* ── Raw color tokens exposed to Tailwind ──────────────────────────── */
  --color-phosphor:      var(--phosphor);
  --color-phosphor-dim:  var(--phosphor-dim);
  --color-amber-p7:      var(--amber-p7);
  --color-magenta:       var(--magenta);
  --color-amber:         var(--amber);
  --color-cyan:          var(--cyan);

  --color-cga-black:     var(--cga-black);
  --color-cga-white:     var(--cga-white);
  --color-cga-green:     var(--cga-green);
  --color-cga-lime:      var(--cga-lime);
  --color-cga-red:       var(--cga-red);
  --color-cga-red-dark:  var(--cga-red-dark);
  --color-cga-yellow:    var(--cga-yellow);
  --color-cga-cyan:      var(--cga-cyan);
  --color-cga-magenta:   var(--cga-magenta);
  --color-cga-blue:      var(--cga-blue);

  --color-hw-beige:      var(--hw-beige);
  --color-hw-putty:      var(--hw-putty);
  --color-hw-cream:      var(--hw-cream);

  --color-surface-0:     var(--surface-0);
  --color-surface-1:     var(--surface-1);
  --color-surface-2:     var(--surface-2);
  --color-surface-3:     var(--surface-3);
  --color-surface-4:     var(--surface-4);

  --color-border-dim:    var(--border-dim);
  --color-border-base:   var(--border-base);
  --color-border-bright: var(--border-bright);
  --color-border-active: var(--phosphor);

  /* ── Border radius (near-zero — pixel-precise) ──────────────────────── */
  --radius-sm: 0rem;                  /* truly square — chips, badges */
  --radius-md: 0.125rem;              /* 2px — base radius */
  --radius-lg: 0.25rem;               /* 4px — max rounding allowed */
  --radius-xl: 0.25rem;               /* capped at lg */

  /* ── Font stacks ────────────────────────────────────────────────────── */
  --font-sans:  var(--font-ibm-plex-mono);
  --font-serif: var(--font-playfair-display);
  --font-mono:  var(--font-ibm-plex-mono);

  /* ── Glow shadows ───────────────────────────────────────────────────── */
  --shadow-glow-phosphor: 0 0 15px rgba(0, 255, 65, 0.4),  0 0 40px rgba(0, 255, 65, 0.15);
  --shadow-glow-magenta:  0 0 15px rgba(255, 85, 255, 0.4), 0 0 40px rgba(255, 85, 255, 0.15);
  --shadow-glow-cyan:     0 0 15px rgba(85, 255, 255, 0.4), 0 0 40px rgba(85, 255, 255, 0.15);
  --shadow-glow-amber:    0 0 15px rgba(255, 176, 0, 0.4),  0 0 40px rgba(255, 176, 0, 0.15);
  --shadow-glow-red:      0 0 15px rgba(255, 85, 85, 0.4),  0 0 40px rgba(255, 85, 85, 0.15);
}

/* ── Base layer ───────────────────────────────────────────────────────── */
@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-mono, monospace);
    font-variant-numeric: tabular-nums;
  }

  /* ── Existing CRT effects (kept) ─────────────────────────────────────── */
  .crt-glow {
    text-shadow:
      0 0 7px rgba(0, 255, 65, 0.6),
      0 0 20px rgba(0, 255, 65, 0.3),
      0 0 40px rgba(0, 255, 65, 0.1);
  }

  .crt-scanlines {
    background-image: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 1px,
      rgba(0, 0, 0, 0.15) 1px,
      rgba(0, 0, 0, 0.15) 2px
    );
  }

  .crt-vignette {
    background: radial-gradient(ellipse at center, transparent 60%, rgba(0, 0, 0, 0.3) 100%);
  }

  /* ── Box-shadow glow utilities ──────────────────────────────────────── */
  .glow-phosphor { box-shadow: var(--shadow-glow-phosphor); }
  .glow-magenta  { box-shadow: var(--shadow-glow-magenta); }
  .glow-cyan     { box-shadow: var(--shadow-glow-cyan); }
  .glow-amber    { box-shadow: var(--shadow-glow-amber); }
  .glow-red      { box-shadow: var(--shadow-glow-red); }

  /* ── Text glow variants ─────────────────────────────────────────────── */
  .text-glow-phosphor {
    text-shadow:
      0 0 6px rgba(0, 255, 65, 0.8),
      0 0 20px rgba(0, 255, 65, 0.4);
  }

  .text-glow-amber {
    text-shadow:
      0 0 6px rgba(255, 176, 0, 0.8),
      0 0 20px rgba(255, 176, 0, 0.4);
  }

  .text-glow-cyan {
    text-shadow:
      0 0 6px rgba(85, 255, 255, 0.8),
      0 0 20px rgba(85, 255, 255, 0.4);
  }

  .text-glow-red {
    text-shadow:
      0 0 6px rgba(255, 85, 85, 0.8),
      0 0 20px rgba(255, 85, 85, 0.4);
  }

  .text-glow-magenta {
    text-shadow:
      0 0 6px rgba(255, 85, 255, 0.8),
      0 0 20px rgba(255, 85, 255, 0.4);
  }

  /* ── CRT monitor bezel effect ───────────────────────────────────────── */
  .crt-bezel {
    border: 2px solid var(--hw-putty);
    box-shadow:
      inset 0 0 20px rgba(0, 0, 0, 0.8),
      0 0 0 4px var(--hw-beige);
  }

  /* ── Pixel-grid background texture ─────────────────────────────────── */
  .pixel-grid {
    background-image:
      linear-gradient(rgba(0, 255, 65, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0, 255, 65, 0.03) 1px, transparent 1px);
    background-size: 8px 8px;
  }

  /* ── Panel utilities ───────────────────────────────────────────────── */
  .panel {
    background: var(--surface-1);
    border: 1px solid var(--border-base);
  }

  .panel-inset {
    background: var(--surface-2);
    border: 1px solid var(--border-dim);
  }

  /* ── Typography utilities ─────────────────────────────────────────── */
  .type-display {
    font-family: var(--font-serif);
    font-size: 4.5rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.1;
  }

  .type-h1 {
    font-family: var(--font-serif);
    font-size: 3rem;
    font-weight: 700;
    letter-spacing: -0.01em;
    line-height: 1.1;
  }

  .type-h2 {
    font-family: var(--font-serif);
    font-size: 2.25rem;
    font-weight: 600;
    line-height: 1.2;
  }

  .type-h3 {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    font-weight: 600;
    line-height: 1.2;
  }

  .type-h4 {
    font-family: var(--font-serif);
    font-size: 1.125rem;
    font-weight: 500;
    line-height: 1.2;
  }

  .type-body {
    font-family: var(--font-mono);
    font-size: 0.875rem;
    font-weight: 400;
    line-height: 1.5;
  }

  .type-label {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    line-height: 1.5;
  }

  .type-caption {
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    font-weight: 400;
    line-height: 1.5;
  }

  .type-data {
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    font-weight: 400;
    letter-spacing: -0.01em;
    font-variant-numeric: tabular-nums;
  }

  /* ── Animated cursor blink ──────────────────────────────────────────── */
  .cursor::after {
    content: '█';
    color: var(--phosphor);
    animation: cursor-blink 1s step-end infinite;
  }

  /* ── Flicker overlay ────────────────────────────────────────────────── */
  .flicker {
    animation: phosphor-flicker 8s infinite;
  }

  /* ── Scan-in text reveal ────────────────────────────────────────────── */
  .scan-in {
    animation: scan-in 0.4s steps(20, end) forwards;
  }
}

/* ── Keyframe animations ──────────────────────────────────────────────── */

@keyframes breathe-glow {
  0%, 100% { box-shadow: 0 0 15px rgba(0, 255, 65, 0.15), 0 0 30px rgba(0, 255, 65, 0.05); }
  50%       { box-shadow: 0 0 25px rgba(0, 255, 65, 0.35), 0 0 50px rgba(0, 255, 65, 0.12); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 15px rgba(0, 255, 65, 0.4); }
  50%       { box-shadow: 0 0 30px rgba(0, 255, 65, 0.6), 0 0 50px rgba(0, 255, 65, 0.25); }
}

@keyframes shimmer {
  0%   { transform: translateX(-100%); }
  100% { transform: translateX(200%); }
}

@keyframes phosphor-flicker {
  0%, 100% { opacity: 1; }
  92%       { opacity: 1; }
  93%       { opacity: 0.85; }
  94%       { opacity: 1; }
  96%       { opacity: 0.9; }
  97%       { opacity: 1; }
}

@keyframes scan-in {
  from { clip-path: inset(0 100% 0 0); }
  to   { clip-path: inset(0 0% 0 0); }
}

@keyframes cursor-blink {
  0%, 50%   { opacity: 1; }
  51%, 100% { opacity: 0; }
}

@keyframes audio-bar {
  0%, 100% { transform: scaleY(0.3); }
  50%      { transform: scaleY(1); }
}
